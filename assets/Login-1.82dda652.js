import{Q as F}from"./QAvatar.0d593b50.js";import{Q as y}from"./QCardSection.16c50f6c.js";import{Q as q}from"./QInput.d4293c34.js";import{Q as E}from"./QBtn.29d396af.js";import{c as A,h as $}from"./render.0b265221.js";import{r as g,a3 as k,ae as I,o as L,h as z,g as R,H as B,U,V as j,at as D,_ as N,j as O,k as H,v as K,m as i,d as n,y as M,p as v}from"./index.bc8d72d5.js";import{a as T}from"./focus-manager.d6507951.js";import{b as G}from"./use-router-link.20797d54.js";import{Q as J}from"./QCard.a7cc3f0e.js";import{Q as W}from"./QPage.7daf3735.js";import{Q as X,a as Y}from"./QLayout.e83b4209.js";import"./QIcon.99e8eaf0.js";import"./use-size.5ea98894.js";import"./use-key-composition.dd22bcbe.js";import"./QSpinner.84544347.js";import"./use-dark.806e4198.js";import"./uid.42677368.js";import"./use-form.d20326a4.js";import"./dom.31397dd6.js";import"./QScrollObserver.ed72c789.js";import"./scroll.825bdcd3.js";import"./QResizeObserver.75dee39d.js";var Z=A({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:f,emit:c}){const b=R(),u=g(null);let d=0;const a=[];function _(e){const l=typeof e=="boolean"?e:o.noErrorFocus!==!0,p=++d,V=(t,r)=>{c("validation"+(t===!0?"Success":"Error"),r)},C=t=>{const r=t.validate();return typeof r.then=="function"?r.then(s=>({valid:s,comp:t}),s=>({valid:!1,comp:t,err:s})):Promise.resolve({valid:r,comp:t})};return(o.greedy===!0?Promise.all(a.map(C)).then(t=>t.filter(r=>r.valid!==!0)):a.reduce((t,r)=>t.then(()=>C(r).then(s=>{if(s.valid===!1)return Promise.reject(s)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return p===d&&V(!0),!0;if(p===d){const{comp:r,err:s}=t[0];if(s!==void 0&&console.error(s),V(!1,r),l===!0){const P=t.find(({comp:w})=>typeof w.focus=="function"&&G(w.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function h(){d++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&B(e);const l=d+1;_().then(p=>{l===d&&p===!0&&(o.onSubmit!==void 0?c("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function Q(e){e!==void 0&&B(e),c("reset"),U(()=>{h(),o.autofocus===!0&&o.noResetFocus!==!0&&m()})}function m(){T(()=>{if(u.value===null)return;const e=u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),l=>l.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}j(D,{bindComponent(e){a.push(e)},unbindComponent(e){const l=a.indexOf(e);l>-1&&a.splice(l,1)}});let S=!1;return k(()=>{S=!0}),I(()=>{S===!0&&o.autofocus===!0&&m()}),L(()=>{o.autofocus===!0&&m()}),Object.assign(b.proxy,{validate:_,resetValidation:h,submit:x,reset:Q,focus:m,getValidationComponents:()=>a}),()=>z("form",{class:"q-form",ref:u,onSubmit:x,onReset:Q},$(f.default))}});const ee=O({setup(){return{username:g("Pratik"),password:g("12345")}}}),te=v("img",{src:"profile.svg"},null,-1),oe=v("div",{class:"text-center q-pt-lg"},[v("div",{class:"col text-h6 ellipsis"}," Log in ")],-1);function ae(o,f,c,b,u,d){return H(),K(X,null,{default:i(()=>[n(Y,null,{default:i(()=>[n(W,{class:"flex bg-image flex-center"},{default:i(()=>[n(J,{style:M(o.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:i(()=>[n(y,null,{default:i(()=>[n(F,{size:"103px",class:"absolute-center shadow-10"},{default:i(()=>[te]),_:1})]),_:1}),n(y,null,{default:i(()=>[oe]),_:1}),n(y,null,{default:i(()=>[n(Z,{class:"q-gutter-md"},{default:i(()=>[n(q,{filled:"",modelValue:o.username,"onUpdate:modelValue":f[0]||(f[0]=a=>o.username=a),label:"Username","lazy-rules":""},null,8,["modelValue"]),n(q,{type:"password",filled:"",modelValue:o.password,"onUpdate:modelValue":f[1]||(f[1]=a=>o.password=a),label:"Password","lazy-rules":""},null,8,["modelValue"]),v("div",null,[n(E,{label:"Login",to:"/",type:"button",color:"primary"})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var we=N(ee,[["render",ae]]);export{we as default};
