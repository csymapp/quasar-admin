import{Q as F}from"./QAvatar.488e00c1.js";import{Q as y}from"./QCardSection.a05d92e6.js";import{Q as q}from"./QInput.ba772abc.js";import{Q as E}from"./QBtn.bac35353.js";import{c as A,h as $}from"./render.3075bf0b.js";import{r as g,a3 as k,ae as I,o as L,h as z,g as R,H as B,U,V as j,at as D,_ as N,j as O,k as H,v as K,m as i,d as n,y as M,p as v}from"./index.b0880704.js";import{a as T}from"./focus-manager.d6507951.js";import{b as G}from"./use-router-link.bf3751cb.js";import{Q as J}from"./QCard.7b819f93.js";import{Q as W}from"./QPage.ad66783f.js";import{Q as X,a as Y}from"./QLayout.798790ec.js";import"./QIcon.dfcc865e.js";import"./use-size.d11174ce.js";import"./use-key-composition.9bd8685b.js";import"./QSpinner.b9a97cc8.js";import"./use-dark.1d74980c.js";import"./uid.42677368.js";import"./use-form.f8b3f6f8.js";import"./dom.30c7df43.js";import"./QScrollObserver.06cea98f.js";import"./scroll.f7331efc.js";import"./QResizeObserver.eafe9602.js";var Z=A({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:f,emit:c}){const b=R(),u=g(null);let d=0;const a=[];function _(e){const l=typeof e=="boolean"?e:o.noErrorFocus!==!0,p=++d,V=(t,r)=>{c("validation"+(t===!0?"Success":"Error"),r)},C=t=>{const r=t.validate();return typeof r.then=="function"?r.then(s=>({valid:s,comp:t}),s=>({valid:!1,comp:t,err:s})):Promise.resolve({valid:r,comp:t})};return(o.greedy===!0?Promise.all(a.map(C)).then(t=>t.filter(r=>r.valid!==!0)):a.reduce((t,r)=>t.then(()=>C(r).then(s=>{if(s.valid===!1)return Promise.reject(s)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return p===d&&V(!0),!0;if(p===d){const{comp:r,err:s}=t[0];if(s!==void 0&&console.error(s),V(!1,r),l===!0){const P=t.find(({comp:w})=>typeof w.focus=="function"&&G(w.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function h(){d++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&B(e);const l=d+1;_().then(p=>{l===d&&p===!0&&(o.onSubmit!==void 0?c("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function Q(e){e!==void 0&&B(e),c("reset"),U(()=>{h(),o.autofocus===!0&&o.noResetFocus!==!0&&m()})}function m(){T(()=>{if(u.value===null)return;const e=u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),l=>l.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}j(D,{bindComponent(e){a.push(e)},unbindComponent(e){const l=a.indexOf(e);l>-1&&a.splice(l,1)}});let S=!1;return k(()=>{S=!0}),I(()=>{S===!0&&o.autofocus===!0&&m()}),L(()=>{o.autofocus===!0&&m()}),Object.assign(b.proxy,{validate:_,resetValidation:h,submit:x,reset:Q,focus:m,getValidationComponents:()=>a}),()=>z("form",{class:"q-form",ref:u,onSubmit:x,onReset:Q},$(f.default))}});const ee=O({setup(){return{username:g("Pratik"),password:g("12345")}}}),te=v("img",{src:"profile.svg"},null,-1),oe=v("div",{class:"text-center q-pt-lg"},[v("div",{class:"col text-h6 ellipsis"}," Log in ")],-1);function ae(o,f,c,b,u,d){return H(),K(X,null,{default:i(()=>[n(Y,null,{default:i(()=>[n(W,{class:"flex bg-image flex-center"},{default:i(()=>[n(J,{style:M(o.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:i(()=>[n(y,null,{default:i(()=>[n(F,{size:"103px",class:"absolute-center shadow-10"},{default:i(()=>[te]),_:1})]),_:1}),n(y,null,{default:i(()=>[oe]),_:1}),n(y,null,{default:i(()=>[n(Z,{class:"q-gutter-md"},{default:i(()=>[n(q,{filled:"",modelValue:o.username,"onUpdate:modelValue":f[0]||(f[0]=a=>o.username=a),label:"Username","lazy-rules":""},null,8,["modelValue"]),n(q,{type:"password",filled:"",modelValue:o.password,"onUpdate:modelValue":f[1]||(f[1]=a=>o.password=a),label:"Password","lazy-rules":""},null,8,["modelValue"]),v("div",null,[n(E,{label:"Login",to:"/",type:"button",color:"primary"})])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var we=N(ee,[["render",ae]]);export{we as default};
